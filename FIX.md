# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å ngrok

## –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞! ‚úÖ

–ë—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞: Vite –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –∑–∞–ø—Ä–æ—Å—ã —Å ngrok –¥–æ–º–µ–Ω–∞.

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω ngrok –¥–æ–º–µ–Ω –≤ `allowedHosts` –≤ `vite.config.ts`
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–∫—Å–∏ –¥–ª—è `/api` –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ backend
3. ‚úÖ Frontend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∏–ª–∏ Telegram):
```
https://marietta-gumptious-decurrently.ngrok-free.dev
```

### 2. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ

### 3. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏:

**–û—à–∏–±–∫–∞: "Blocked request"**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ frontend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ ngrok —Ç—É–Ω–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç: `ps aux | grep ngrok`

**–û—à–∏–±–∫–∞: "Network Error" –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–≤—ã—á–µ–∫**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend —Ä–∞–±–æ—Ç–∞–µ—Ç: `curl http://localhost:5001/health`
- –í Telegram Mini App –∑–∞–ø—Ä–æ—Å—ã –∫ API –∏–¥—É—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏ Vite, —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–û—à–∏–±–∫–∞: CORS**
- Backend —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ CORS –¥–ª—è `http://localhost:3000`
- –î–ª—è ngrok –¥–æ–º–µ–Ω–∞ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `FRONTEND_URL` –≤ `backend/.env`

## –ï—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ ngrok:

–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
Frontend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `/api`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ backend —á–µ—Ä–µ–∑ Vite.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π ngrok –¥–ª—è backend
```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
cd /Users/ebabochiev/Desktop/tg
./bin/ngrok http 5001
```
–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç—å `VITE_API_URL` –≤ frontend –Ω–∞ –Ω–æ–≤—ã–π URL.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–±–Ω–æ–≤–∏—Ç—å CORS –≤ backend
–î–æ–±–∞–≤–∏—Ç—å ngrok –¥–æ–º–µ–Ω –≤ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –≤ `backend/src/index.ts`:
```typescript
app.use(cors({
  origin: [
    process.env.FRONTEND_URL || 'http://localhost:3000',
    'https://marietta-gumptious-decurrently.ngrok-free.dev',
    /.ngrok-free.dev$/
  ],
  credentials: true
}))
```

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:

- ‚úÖ Frontend: https://marietta-gumptious-decurrently.ngrok-free.dev
- ‚úÖ Ngrok —Ç—É–Ω–Ω–µ–ª—å: –†–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Backend: http://localhost:5001
- ‚úÖ Vite –ø—Ä–æ–∫—Å–∏: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è /api

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```bash
tail -f /tmp/frontend.log
tail -f /tmp/ngrok.log
```
